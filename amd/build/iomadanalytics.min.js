define(["jquery","core/ajax","/report/iomadanalytics/amd/src/Chart.min.js"],function(a,b,c){return{init:function(){a(document).ready(function(){function d(){g(!0);var c=[];a(".country_company input").each(function(){this.checked&&c.push(a(this).attr("id"))});var d=[];d.push(a("#selectedFilter").val());var f=JSON.stringify({companies:c,filters:d}),h=b.call([{methodname:"report_iomadanalytics_filters",args:{filters:f}}]);h[0].done(function(b){e(a.parseJSON(b)),g(!1)}).fail(function(a){console.log("fail"),console.log(a)})}function e(a){null!==k&&k.destroy(),k=new c(document.getElementById("chart-grades").getContext("2d"),{type:"bar",data:a,options:{scales:{yAxes:[{ticks:{beginAtZero:!0}}]},tooltips:{enabled:!0,mode:"single",callbacks:{label:function(a,b){return b.datasets[a.datasetIndex].label+" : "+a.yLabel+"%"}}}}})}function f(b){a("#"+b).click(function(){a("#"+b).prop("checked")===!0?a(".country-"+b+" input").prop("checked",!0):a(".country-"+b+" input").prop("checked",!1),d()})}function g(b){a(".country_company input, .country input, #filters_tab button").each(function(){a(this).attr("disabled",b)})}function h(){a("#filters_tab button").each(function(){a(this).html(a("<div>").html(a(this).html()).text()).removeClass("bkgBtn")})}var i=["ID","MY"],j="/report/iomadanalytics/templates/",k=null;a.getJSON(j+"graph_grades_all_companies.json",function(a){e(a)});for(var l=0;l<i.length;l++)f(i[l]);a(".country_company input").change(function(){d()}),a("#filters_tab button").click(function(){a("#selectedFilter").val(a(this).data("filterid")),h(),a(this).html('<i class="fa fa-check"></i> '+a(this).html()).addClass("bkgBtn"),d()}),a("div.bhoechie-tab-menu>div.list-group>a").click(function(b){b.preventDefault(),a(this).siblings("a.active").removeClass("active"),a(this).addClass("active");var c=a(this).index();a("div.bhoechie-tab>div.bhoechie-tab-content").removeClass("active"),a("div.bhoechie-tab>div.bhoechie-tab-content").eq(c).addClass("active")})})}}});